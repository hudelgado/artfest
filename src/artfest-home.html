<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="../bower_components/paper-tabs/paper-tab.html">
<link rel="import" href="../bower_components/paper-card/paper-card.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-styles/typography.html">
<link rel="import" href="../bower_components/iron-collapse/iron-collapse.html">
<link rel="import" href="shared-styles.html">

<dom-module id="artfest-home">
  <template>
    <style include="shared-styles">
      :host {
        display: block;
        padding: 10px;
      }

      section {
        padding: 0 2em;
      }

      .container {
        @apply --layout-horizontal;
        max-width: 800px;
        margin: 0 auto;
      }

      .container>* {
        @apply --layout-flex;
      }

      .container img {
        max-width: 100%;
        max-height: 100%;
      }

      .container h3 {
        font-size: 32px;
        font-weight: 300;
        margin: 24px 0;
      }

      .container p {
        line-height: 1.5;
      }

      .container .content-container {
        margin-left: 1em !important;
      }

      .callout {
        display: flex;
      }

      paper-card {
        flex: 1;
        margin: 1em;
        --paper-card-header-color: #fff;
      }

      @media (max-width: 600px) {
        .container {
          @apply --layout-vertical;
        }
      }
    </style>
    <style is="custom-style">
      paper-tabs {
        --paper-tabs-selection-bar-color: red;
      }

      paper-tab {
        color: #212121;
      }

      paper-tab.iron-selected {
        font-weight: bold;
      }
    </style>
    <style is="custom-style">
      .movie-image,
      .ashow-image {
        float: right;
      }

      .movie-header,
      .ashow-header {
        @apply --paper-font-headline;
      }

      paper-icon-button.movie-icon,
      paper-icon-button.show-icon {
        --iron-icon-fill-color: white;
        --iron-icon-stroke-color: var(--paper-grey-600);
      }
    </style>

    <div class="callout">
      <paper-card heading="Filmes" image="images/home/filmes.jpg" alt="Filmes">
        <div class="card-content" style="height: 150px;">
          <h3>SÉRIE DOCUMENTAL SOBRE O ALENTEJO</h3>
          <p>Esta série documental contempla a realização de 6 filmes a apresentar em auditórios ou salas de todos os municípios
            envolvidos nesta parceria. Com realização de Luís Godinho.</p>
        </div>
      </paper-card>
      <paper-card heading="Exposições" image="images/home/exposicoes.jpg" alt="Exposições">
        <div class="card-content">
          <p>Uma proposta que engloba a realização de uma exposição de Fotografia sobre o Alentejo, que pretende colocar em
            evidência a ligação entre o Património Material e Imaterial do Alto, Baixo, Litoral e Alentejo Central. Trata-se
            de uma exposição única que circulará por 6 cidades adaptada às galerias municipais existentes, a espaços expositivos
            próprios em unidades hoteleiras e ao espaço urbano onde serão afixadas em mobiliário urbano pré-existente ou
            em telas colocadas no exterior.</p>
          <p>A mostra conta com uma publicação que compilará uma seleção das imagens expostas mais ilustrativas.</p>
          <p>Estas ações contam com o envolvimento dos fotógrafos Rui Diogo Castela, Carlos Gasparinho e Telmo Rocha.</p>
        </div>
      </paper-card>
      <paper-card heading="Espetáculos" image="images/home/espectaculos.jpg" alt="Espetáculos">
        <div class="card-content">
          <p>Produção e apresentação de 34 espectáculos de algumas das artes performativas mais identitárias do Alentejo com apresentações semanais ao vivo.</p>
          <p>Os espectáculos a apresentar enquadram-se nas áreas artísticas do Fado, Cante, Marionetas e as Danças.</p>
        </div>
      </paper-card>
    </div>

    <section>
      <paper-card>
        <div class="card-content">
          <div class="movie-header">ARTFEST
            <span class="font-weight: bold;">PATRIMÓNIOS</span>
          </div>
          <p>É a designação genérica do projeto de animação cultural promovido pela Associ’arte - Associação de Comunicação
            e Artes e conta com as parcerias de vários municípios: Évora, Elvas, Beja, Cuba, Vidigueira e Portel. A decorrer
            até 2019, o projeto é Cofinanciado pelo Alentejo 2020, Portugal 2020, União Europeia – Fundo Europeu de Desenvolvimento
            Regional.</p>
          <p>Trata-se de um conjunto de iniciativas que evidenciam algumas das características distintivas da Região Alentejo
            como o vasto património imaterial, características naturais e geográficas, gastronomia, vinho, música, danças,
            teatro de bonecos e o cante.</p>
          <p>Inclui uma programação cultural regional, abrangente e articulada que divulga e promove as suas singularidades
            junto dos seus habitantes e de quem nos visita.</p>
          <p>ArtFest
            <span class="font-weight: bold">PATRIMÓNIOS</span> inclui trinta e seis espetáculos, seis filmes promocionais e seis exposições fotográficas
            a decorrer em cada um dos municípios parceiros.</p>
        </div>
      </paper-card>
    </section>

    <section>
      <h2>Filmes</h2>
      <div style="display: flex; flex-wrap: wrap;">
        <template is="dom-repeat" items="[[movies]]" as="movie">
          <a href="[[rootPath]]detalhes/filme/[[movie.slug]]" style="text-decoration: none; color: black;">
            <paper-card class="movie">
              <div class="card-content">
                <div class="movie-image">
                  <img src="[[__getMovieImageUrl(movie)]]" hidden$="[[!movie.images.featured]]" />
                  <img src="images/placeholders/300x600.png" hidden$="[[movie.images.featured]]">
                    <h1 class="placeholderHeader" hidden$="[[movie.images.featured]]">[[movie.name]]</h1>
                  </img>
                </div>
                <div class="movie-header">[[movie.name]]</div>
                <div hidden$=[[!movie.title]]>[[movie.title]]</div>
                <div style="width: 200px; padding-right: 300px;">
                  <template is="dom-repeat" items="[[movie.description]]" as="description">
                    <p>[[description]]</p>
                  </template>
                </div>
              </div>
            </paper-card>
          </a>
        </template>
      </div>
    </section>

    <section>
      <h2>Espetáculos</h2>
      <div style="display: flex; flex-wrap: wrap;">
        <template is="dom-repeat" items="[[shows]]">
        <paper-card class="show">
          <div class="card-content">
            <div class="show-image">
              <img src="[[item.images.featured]]" />
            </div>
            <div class="show-header">[[item.artist]]</div>
            <div>[[item.genre]]</div>
          </div>
          <ul>
            <li style="list-style:none;">Évora<br/>
              <span><iron-icon icon="my-icons:location-on"></iron-icon>Armazém 8</span>
              <span style="margin-left: 1em;"><iron-icon icon="my-icons:date-range"></iron-icon>[[_getShowSchedueleDate(item)]]</span>
              <span style="margin-left: 1em;"><iron-icon icon="my-icons:access-time"></iron-icon>[[_getShowSchedueleTime(item)]]</span>
            </li>
          </ul>
        </paper-card>
        </template>
      </div>
    </section>
  </template>

  <script>
    class ArtfestHome extends Polymer.Element {
      static get is() { return 'artfest-home'; }
      static get properties() {
        return {
          shows: Array,
          movies: Array
        }
      }
      _getShowSchedueleDate(show) {
        return this.__getDay(show.scheduele.evora.date) + ' ' + 
          this.__getMonth(show.scheduele.evora.date);
      }
      _getShowSchedueleTime(show) {
        return this.__getHour(show.scheduele.evora.date) + 'h';
      }
      __getMovieDescription(description, index) {
        return description;
      }
      __parseTime(date) {
        var parsedDate = new Date(date);
        return parsedDate.toTimeString().split(' ');
      }
      __parseDate(date) {
        var parsedDate = new Date(date);
        return parsedDate.toDateString().split(' ');
      }
      __getDay(date) {
        var dateParts = this.__parseDate(date);
        return dateParts[2];
      }
      __getMonth(date) {
        var dateParts = this.__parseDate(date);
        return dateParts[1];
      }
      __getYear(date) {
        var dateParts = this.__parseDate(date);
        return dateParts[3];
      }
      __getHour(date) {
        var timeParts = this.__parseTime(date);
        return timeParts[0].split(':')[0];
      }
      __getMovieImageUrl(movie) {
        return movie && movie.images && movie.images.featured ? movie.images.featured: '';
      }
    }

    window.customElements.define(ArtfestHome.is, ArtfestHome);
  </script>
</dom-module>