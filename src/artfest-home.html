<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="../bower_components/paper-tabs/paper-tab.html">
<link rel="import" href="../bower_components/paper-card/paper-card.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-styles/typography.html">
<link rel="import" href="../bower_components/iron-collapse/iron-collapse.html">
<link rel="import" href="shared-styles.html">

<dom-module id="artfest-home">
  <template>
    <style include="shared-styles">
      :host {
        display: block;
        padding: 10px;
        --movie-color: rgb(179, 4, 35);
        --show-color: rgb(193, 100, 81);
        --exposition-color: yellow;
      }

      paper-card {
          --paper-card-header-text: {
            color: white;
            bottom: 0;
            right: 0;
            font-weight: bold;
          };
      }
      .grid {
        display: flex;
        flex-wrap: wrap;
        margin-top: 10px;
      }
      .grid .item {
        flex: 1;
        margin: 10px;
        text-decoration: none;
      }
      .grid-item {
        min-width: 200px;
        display: flex;
        flex-direction: row;
      }
      .card {
        min-width: 300px;
      }
      #festInfo .card {
        margin: 10px;
      }
      .item .entry-header {
        width: 100%;
        text-align: center;
      }
      .item .card-image {
        margin: auto;
      }
      .item .card-image img {
        max-width: 300px;
      }
      .card-content {
        padding: 0 1em;
        text-align: center;
      }

      article {
        display: flex;
        flex-direction: column;
      }

      article ul {
        margin-left:0;
        list-style:none;
        padding-left: 0;
      }

      article ul span {
        font-size: smaller;
      }

      .movie {
        border-bottom: 2px solid var(--movie-color);
      }
      .show {
        border-bottom: 2px solid var(--show-color);
      }
      .exposition {
        border-bottom: 2px solid var(--exposition-color);
      }

      @media (max-width: 900px) {
        .grid {
          @apply --layout-vertical;
        }
        article {
          display: flex;
          flex-direction: row;
        }
      }
      @media (max-width: 700px) {
        article {
          flex-direction: column;
        }
      }
    </style>

    <div class="callout grid">
      <paper-card heading="Filmes" image="images/home/filmes.jpg" alt="Filmes" class="item">
        <div class="card-content">
          <h3>Série documental sobre o Alentejo</h3>
          <p>Esta série documental contempla a realização de 6 filmes a apresentar em auditórios ou salas de todos os municípios
            envolvidos nesta parceria. Com realização de Luís Godinho.</p>
            <p>Os espectáculos a apresentar enquadram-se nas áreas artísticas do Fado, Cante, Marionetas e as Danças.</p>
        </div>
      </paper-card>
      <paper-card heading="Exposições" image="images/home/exposicoes.jpg" alt="Exposições" class="item">
        <div class="card-content">
          <h3>Exposição de fotografia sobre o Alentejo Itenerante.</h3>
          <p>Uma proposta que engloba a realização de uma exposição de Fotografia sobre o Alentejo, que pretende colocar em
            evidência a ligação entre o Património Material e Imaterial do Alto, Baixo, Litoral e Alentejo Central. Trata-se
            de uma exposição única que circulará por 6 cidades adaptada às galerias municipais existentes, a espaços expositivos
            próprios em unidades hoteleiras e ao espaço urbano onde serão afixadas em mobiliário urbano pré-existente ou
            em telas colocadas no exterior.</p>
          <p>A mostra conta com uma publicação que compilará uma seleção das imagens expostas mais ilustrativas.</p>
          <p>Estas ações contam com o envolvimento dos fotógrafos Rui Diogo Castela, Carlos Gasparinho e Telmo Rocha.</p>
        </div>
      </paper-card>
      <paper-card heading="Espetáculos" image="images/home/espectaculos.jpg" alt="Espetáculos" class="item">
        <div class="card-content">
          <h3>Produção e apresentação de espectáculos</h3>
          <p>Produção e apresentação de 34 espectáculos de algumas das artes performativas mais identitárias do Alentejo com apresentações semanais ao vivo.</p>
          <p>Os espectáculos a apresentar enquadram-se nas áreas artísticas do Fado, Cante, Marionetas e as Danças.</p>
        </div>
      </paper-card>
    </div>

    <section id="festInfo">
      <div class="card">
        <div class="card-content">
          <h1 class="movie-header">ARTFEST <span style="font-weight: bold;">PATRIMÓNIOS</span></h1>
          <p>É a designação genérica do projeto de animação cultural promovido pela Associ’arte - Associação de Comunicação
            e Artes e conta com as parcerias de vários municípios: Évora, Elvas, Beja, Cuba, Vidigueira e Portel. A decorrer
            até 2019, o projeto é Cofinanciado pelo Alentejo 2020, Portugal 2020, União Europeia – Fundo Europeu de Desenvolvimento
            Regional.</p>
          <p>Trata-se de um conjunto de iniciativas que evidenciam algumas das características distintivas da Região Alentejo
            como o vasto património imaterial, características naturais e geográficas, gastronomia, vinho, música, danças,
            teatro de bonecos e o cante.</p>
          <p>Inclui uma programação cultural regional, abrangente e articulada que divulga e promove as suas singularidades
            junto dos seus habitantes e de quem nos visita.</p>
          <p>ArtFest
            <span class="font-weight: bold">PATRIMÓNIOS</span> inclui trinta e seis espetáculos, seis filmes Documentais e duas exposições fotográficas.</p>
        </div>
      </div>
    </section>


    <h1>Filmes</h1>
    <section class="grid">
      <template is="dom-repeat" items="[[movies]]" as="movie">
        <a class="item card" href="[[rootPath]]detalhes/filme/[[movie.slug]]">
          <article>
            <div class="card-image">
              <img src="[[__getMovieImageUrl(movie)]]" hidden$="[[!movie.images.featured]]" />
            </div>
            <div class="card-content">
              <h1 class="entry-header">[[movie.name]]</h1>
              <div hidden$=[[!movie.title]]>[[movie.title]]</div>
              <div class="movieDescriptionContainer">
                <template is="dom-repeat" items="[[movie.description]]" as="description">
                  <p>[[description]]</p>
                </template>
              </div>
            </div>
          </article>
        </a>
      </template>
    </section>

    <h1>Espectáculos</h1>
    <section class="grid">
      <template is="dom-repeat" items="[[shows]]" as="show">
        <a class="item card">
          <article>
            <div class="card-content">
              <div class="card-image">
                <img src="[[show.images.featured]]" />
              </div>
            </div>
            <div>
              <h2 class="entry-header">[[show.artist]]</h2>
              <div>[[show.genre]]</div>
              <ul>
                <li>Évora<br/>
                  <span><iron-icon icon="my-icons:location-on"></iron-icon>Armazém 8</span>
                  <span><iron-icon icon="my-icons:date-range"></iron-icon>[[_getShowSchedueleDate(show)]]</span>
                  <span><iron-icon icon="my-icons:access-time"></iron-icon>[[_getShowSchedueleTime(show)]]</span>
                </li>
              </ul>
            </div>
          </article>
        </a>
      </template>
    </section>
  </template>

  <script>
    class ArtfestHome extends Polymer.Element {
      static get is() { return 'artfest-home'; }
      static get properties() {
        return {
          shows: Array,
          movies: Array
        }
      }
      _getShowSchedueleDate(show) {
        return this.__getDay(show.scheduele.evora.date) + ' ' +
          this.__getMonth(show.scheduele.evora.date);
      }
      _getShowSchedueleTime(show) {
        return this.__getHour(show.scheduele.evora.date) + 'h';
      }
      __getMovieDescription(description, index) {
        return description;
      }
      __parseTime(date) {
        var parsedDate = new Date(date);
        return parsedDate.toTimeString().split(' ');
      }
      __parseDate(date) {
        var parsedDate = new Date(date);
        return parsedDate.toDateString().split(' ');
      }
      __getDay(date) {
        var dateParts = this.__parseDate(date);
        return dateParts[2];
      }
      __getMonth(date) {
        var dateParts = this.__parseDate(date);
        return dateParts[1];
      }
      __getYear(date) {
        var dateParts = this.__parseDate(date);
        return dateParts[3];
      }
      __getHour(date) {
        var timeParts = this.__parseTime(date);
        return timeParts[0].split(':')[0];
      }
      __getMovieImageUrl(movie) {
        return movie && movie.images && movie.images.featured ? movie.images.featured: '';
      }
    }

    window.customElements.define(ArtfestHome.is, ArtfestHome);
  </script>
</dom-module>